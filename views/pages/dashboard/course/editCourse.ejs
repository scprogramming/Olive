<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous">
    <link rel="stylesheet" href="/public/sidebar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/public/editCourse.css">
    
  </head>

  <body>

    <div class="page-container">
      <div class="content-wrap">
          <div class="row">
              <%- include('../navbar.ejs'); %>
          </div>
          <div class="row">
              <div class="col-2">
                  <%- include('../sidebar.ejs'); %>
              </div>
              <div class="col-10">
                <input type="text" class="form-control" id="courseTitle" value="">     
                <button class="btn btn-primary" onclick="saveTitle()">Save Title</button>
                <p id="status"></p>
                <div id="pageContent">
                  <div class="tab">
                    <button class="tablinks" onclick="openSection(event,'curriculum')">Curriculum</button>
                    <button class="tablinks" onclick="openSection(event,'pricing')">Pricing</button>
                    <button class="tablinks" onclick="openSection(event,'landing')">Landing Page</button>
                  </div>

                  

                  <div id="curriculum" class="tabcontent">
                    <div class="row">
                      <div class="col-6">
                      <nav id="courseSidebar">
                          <ul class="list-unstyled modComponents"> 
                            <% for (let i = 0; i < content.length; i++) {%>
                              <% console.log(content[i]) %>
                              <% let module_title = content[i].module_title%>
                              <% console.log(module_title)%>

                              <li>
                                <a id = "<%=module_title%>" href="#<%=module_title%>" data-toggle="collapse" aria-expanded="false" class="moddropdown-toggle"><%=module_title%></a>
                                <ul class = "collapse list-unstyled" id="<%=module_title%>">
                                  <li onclick="showLesson(event, 'lesson<%=content[i].lessons.lesson_id%>"><a class="modsidebarlink modindentitem"><%=content[i].lessons.lesson_title%></a></li>
                                </ul>
                              </li>
                            <%}%>

                              <li>
                                  <a id = "module1" href="#module1lessons" data-toggle="collapse" aria-expanded="false" class="moddropdown-toggle">Module 1</a>
                                  <ul class="collapse list-unstyled" id="module1lessons">
                                      <li onclick="showLesson(event,'lesson-id')"><a class="modsidebarlink modindentitem">Lesson1</a></li>
                                      <li onclick="showLesson(event,'lesson-id2')"><a class="modsidebarlink modindentitem">Lesson2</a></li>
                                      <li><button class="button btn-secondary">Add Lesson</button></li>
                                  </ul>
                              </li>
              
                              
                              
                          </ul>
                      </nav>

                      <button class="button btn-primary">Add Module</button>
                    </div>

                    <div class="col-6" id="lessonContainer">
                      <div id="lesson-id" style="display:none;" class="lessons">
                        <h2>Content!</h2>
                      </div>
                      <div id="lesson-id2" style="display:none;" class="lessons">
                        <h2>Content2!</h2>
                      </div>
                    </div>

                  </div>
                  </div>

                  <div id="pricing" class="tabcontent" style="display:none;">
                    <h3>Pricing</h3>
                  </div>

                  <div id="landing" class="tabcontent" style="display:none">
                    <h3>Landing</h3>
                  </div>
                </div>
                
              </div>
            </div>
      </div>
  </div>

  
</body>
 
<script>

  
  

  function showLesson(event,lesson){
    let i, tabContent, tabLinks;
    lessonContent = document.getElementsByClassName("lessons");

    for (i = 0; i < lessonContent.length; i++){
      lessonContent[i].style.display = "none";
    }

    document.getElementById(lesson).style.display = "block";
  }


  function openSection(event, page){
    let i, tabContent, tabLinks;
    tabContent = document.getElementsByClassName("tabcontent");

    for (i = 0; i < tabContent.length; i++){
      tabContent[i].style.display = "none";
    }

    tabLinks = document.getElementsByClassName('tablinks');
    for (i = 0; i < tabLinks.length; i++){
      tabLinks[i].className = tabLinks[i].className.replace(" active", "");
    }

    document.getElementById(page).style.display = "block";
    event.currentTarget.className += " active";
  }

</script>


</html>