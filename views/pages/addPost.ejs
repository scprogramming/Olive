<!DOCTYPE html>
<html>
  <head>
    <!-- Include stylesheet -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" href="/public/addPost.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js" integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja" crossorigin="anonymous"></script>
  </head>

  <body>
  <!-- Create the editor container -->
  <form>
    <label for="title" class="sr-only">Article Title: </label>
    <input name="title" type="title" id="title" class="form-control" placeholder="Enter an article title" required autofocus>

    <div id="toolbar-container">
      <span class="ql-formats">
      <select class="ql-font"></select>
      <select class="ql-size"></select>
      </span>
      <span class="ql-formats">
      <button class="ql-bold"></button>
      <button class="ql-italic"></button>
      <button class="ql-underline"></button>
      <button class="ql-strike"></button>
      </span>
      <span class="ql-formats">
      <select class="ql-color"></select>
      <select class="ql-background"></select>
      </span>
      <span class="ql-formats">
      <button class="ql-script" value="sub"></button>
      <button class="ql-script" value="super"></button>
      </span>
      <span class="ql-formats">
      <button class="ql-header" value="1"></button>
      <button class="ql-header" value="2"></button>
      <button class="ql-blockquote"></button>
      <button class="ql-code-block"></button>
      </span>
      <span class="ql-formats">
      <button class="ql-list" value="ordered"></button>
      <button class="ql-list" value="bullet"></button>
      <button class="ql-indent" value="-1"></button>
      <button class="ql-indent" value="+1"></button>
      </span>
      <span class="ql-formats">
      <button class="ql-direction" value="rtl"></button>
      <select class="ql-align"></select>
      </span>
      <span class="ql-formats">
      <button class="ql-link"></button>
      <button class="ql-image"></button>
      <button class="ql-video"></button>
      <button class="ql-formula"></button>
      </span>
      <span class="ql-formats">
      <button class="ql-clean"></button>
      </span>
      </div>

      
    <div id="editor">
      <p>Hello World!</p>
      <p>Some initial <strong>bold</strong> text</p>
      <p><br></p>
    </div>

    <p id="status"></p>
    <button class="btn btn-primary" type="submit">Save</button>
  </form>
</body>
  <!-- Include the Quill library -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

  <!-- Initialize Quill editor -->
  <script>
    var quill = new Quill('#editor', {
      modules: {toolbar: '#toolbar-container'},  
      theme: 'snow'
    });

    var form = document.querySelector('form');
    form.addEventListener('submit',function(e){
      e.preventDefault();
      console.log(quill.root.innerHTML);
      var articleData = JSON.stringify({data:quill.root.innerHTML,
      title:document.getElementById("title").value});
      fetch('<%- url %>:<%- port %>/api/addPost', {
                method:'POST',
                headers: {
                    "Content-Type": "application/json"
                },
                body:articleData
            })
            .then(res => res.json())
            .then(data => document.getElementById("status").innerHTML = data);
    });

  </script>

</html>